<!DOCTYPE html>
<html lang="en">
    <head>
        <title></title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
       
    </head>
    <body>
        <h1>字符串</h1>
        <div></div>
        <script>
            console.log('\u{20BB7}');
            //var str1 = String.formCodePoint(0x78,0x1f680,0x79);
            //console.log(str1);
            console.log(0xFFFF);

            var s = 'hello world!';
            console.log(s.startsWith('world',6));
            console.log(s.endsWith('hello',5));//endsWidth是从前n个字符开始，其他两个方法是从第n个字符开始
            console.log(s.includes('hello',5));

            //padStart()、padEnd()字符串补全
            console.log('x'.padStart(4,'ad'));
            console.log('x'.padEnd(5,'ad'));

            //模板字符串
            var obj = {x:1,y:2};
            console.log(`${obj.x+obj.y}`);

            var a=5,b=3;
            function tag(s,v1,v2){
                console.log(s[0]);
                console.log(s[1]);
                console.log(s[2]);
                console.log(v1);
                console.log(v2);
                return 'OK!';
            }
            console.log(tag`hello${a+b}world${a*b}`);

            //String.raw方法可以作为处理字符串模板函数的基本方法，它会将所有变量替换，而且对斜杠进行转义，方便下一步做为字符串使用。
            var str2 = String.raw({raw:'test'},0,1,2);
            console.log(str2);

            // var template = `
            // <ul>
            //     <% for(var i=0;i<data.supplies;i++){%>
            //         <li><% data.supplies[i] %></li>
            //     <% } %>
            // </ul>
            // `;
            // function compile(template){
            //     var evalExpr = /<%=(.+?)%>/g;
            //     var expr = /<%([\s\S]+?)%>/g;
            //     template = template
            //         .replace(evalExpr,`'); \n echo($1);\n echo('`)
            //         .replace(expr,`');\n $1;\n echo('`);
            //     template = 'echo(`'+template+'`);';   
            //     var script =
            //     `(function parse(data){
            //         var output = '';
            //         function echo(html){
            //             output += html; 
            //         }
            //         ${template}
            //         return output;
            //     })`;         
            //     return script;   
            // }
            // var parse = eval(compile(template));
            // div.innerHTML = parse({supplies:["boom","ACE","Lufei"]});

            //标签模板
            var a = 5,b = 10;
            tag`Hello ${ a+b } world ${a*b}`;

            //复杂点的例子
            var total = 30;
            var msg = pass`the total is ${total}(${total*2} with tax)`;
            function pass(item){
                var result = "";
                var i = 0;
                while(i<item.length){
                    result += item[i++];
                    if(i<arguments.length){
                        result +=arguments[i];
                    }
                }
               
                return result;
            }
            console.log(msg);
            //String.raw()
            console.log(String.raw`Hi\n${'world'}`);
            console.log(String.raw({raw:'test'},0,1,2));
        </script>
    </body>
</html>